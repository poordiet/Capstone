
<%= form_with(model: grooming_appointment, local: true) do |form| %>
  <% if grooming_appointment.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(grooming_appointment.errors.count, "error") %> prohibited this grooming_appointment from being saved:</h2>

      <ul>
        <% grooming_appointment.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>


<div class="content">

<!-- Passes pet_id as its own parameter to the controller -->
<%= hidden_field_tag :pet_id, @pet_id %>


<h1>New Grooming Appointment</h1>
<hr/>
<div class="field">
  <%= form.label :customer_id, 'Customer: ', class: 'name-label' %>
  <%= form.label :customer_first_name, :value => @customer_first_name, class: 'name'%>
  <%= form.label :customer_last_name, :value => @customer_last_name, class: 'name'%>
</div>

<div class="field">
  <%= form.label :pet_id, 'Pet: ', class: 'name-label' %>
  <!-- hidden_field passes the pet id in with the grooming appt paramaters-->
  <%= form.hidden_field :pet_id, :value => params[:pet_id] %>
  <%= form.label :pet_name, :value => @pet_name, class: 'name'%>
</div>

 <hr/>

  <div class="form-row">
    <div class=" form-group field col-md-3">
      <%= form.label :store_id %>
      <br>
      <%= form.collection_select :store_id, Store.all, :id, :store_name%>
    </div>
  </div>


  <div class="form-row">
    <div class="form-group field col-md-6">
      <%= form.label :appt_date, 'Appointment Date' %>
      <br>
      <%= form.text_field :appt_date, type: 'date', class: 'form-control col-md-8' %>
    </div>

    <div class="form-group field col-md-4 ml-2">
      <%= form.label :appt_time, 'Appointment Time'%>
      <br>
      <%= form.time_select :appt_time, class: 'form-control', :ampm => true %>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group field col-md-6">
      <%= form.label :appt_blades, 'Blades' %>
      <%= form.text_field :appt_blades, class: 'form-control col-md-8' %>
    </div>
  </div>


  <div class="form-row">
  <div class="form-group field col-md-6">
    <%= form.label :vac_current, 'Vaccine Current' %>
    <br>
    <%= form.select :vac_current, ['Y', 'N'] %>
  </div>
  

  <div class="form-group field col-md-6">
    <%= form.label :vac_current_date, 'Vaccine Current Date' %>
    <br>
   <%= form.text_field :vac_current_date, type: 'date', class: 'form-control col-md-8' %>
  </div>
  </div>

   <div class="form-row">
  <div class="form-group field col-md-6">
    <%= form.label :appt_total, 'Total' %>
    <%= form.number_field:appt_total, class: 'form-control col-md-8' %>
  </div>

   <div class="form-group field">
    <%= form.label :payment_type_id, 'Payment Type' %>
    <br>
    <%= form.collection_select :payment_type_id, PaymentType.all, :id, :payment_type, options = {include_blank: true}  %>
  </div>
  </div>

<hr/>
<h2>Services</h2>
 <div class="form-row">
    <div class="form-group col-md-12">
    <br>
      <%= link_to_add_association 'Add Service', form, :grooming_services, class: 'btn btn-success btn-sm btn-block float-left mx-auto' %>
  </div>
  </div>
  
  <hr/>

<h2>Styles</h2>
 <div class="form-row">
  <div class="form-group col-md-12">
  <br>
    <%= link_to_add_association 'Add Style', form, :grooming_styles, class: 'btn btn-success btn-sm btn-block float-left mx-auto' %>
  <br>
  <br>
  </div>
</div>

  <div class="form-row">
  <div class="form-group field col-md-12">
   <br> 
    <%= form.label :appt_notes, 'Appointment Notes' %>
    <%= form.text_area :appt_notes, class: 'form-control',rows: '4' %>
  </div>
  </div>

  <div class="form-row">
  <div class="form-group field col-md-12">
    <%= form.label :customer_feedback, 'Customer Feedback' %>
    <%= form.text_area :customer_feedback, class: 'form-control', rows: '4' %>
  </div>
  </div>

<!---
<h2>Upload Before Photo</h2>
<div class="form-row">
   <%= form.fields_for :pet_photos do |builder| %>
    <%= render "before_pet_photo_fields", :f => builder %>
  <% end %>
</div>
<br>
  <h2>Upload After Photo</h2>
  <div class="form-row">
  <%= form.fields_for :pet_photos do |builder| %>
    <%= render "after_pet_photo_fields", :f => builder %>
  <% end %>
  </div>  
  -->

 <br>


 <div class="actions">
    <button type="submit" class="btn btn-primary btn-lg float-right ">Submit</button>
     <%= link_to 'Cancel', :back, class: 'btn btn-danger btn-lg float-left'%>
  </div>


<% end %>
</div>
