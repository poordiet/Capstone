<p id="notice"><%= notice %></p>

<div class="container">
<br>
<div class="row ">
<p>
<%= link_to 'Update', edit_grooming_appointment_path(@grooming_appointment), class:'btn btn-warning btn-lg float-right mr-2' %>
<%= link_to 'Back', grooming_appointments_path, class: 'btn btn-danger btn-lg float-right mr-2'%>
</p>
</div>

<div class="row">
<div class="col">
<br>
<p>
  <strong>Customer:</strong>
  <%= @grooming_appointment.pet.customer.customer_first_name %>
  <%= @grooming_appointment.pet.customer.customer_last_name %>
</p>

<p>
  <strong>Pet:</strong>
  <%= @grooming_appointment.pet.pet_name %>
</p>

<p>
  <strong>Store:</strong>
  <%= @grooming_appointment.store.store_address %>
</p>

<p>
  <strong>Payment Type:</strong>
  <%= @grooming_appointment.payment_type.payment_type %>
</p>

<p>
  <strong>Appt Date:</strong>
  <%= @grooming_appointment.appt_date.to_formatted_s(:long) %>
</p>

<p>
  <strong>Appt Blades:</strong>
  <%= @grooming_appointment.appt_blades %>
</p>
</div>


<div class="col">
<!-- Shows the Before Photos photos for each Grooming Appt -->
<h2>Before Photo</h2>
<div>
<%@grooming_appointment.pet_photos.each do |photo|
   if photo.photo_type_id == 2 %>
    <%= image_tag photo.image.variant(resize:"300x300") if photo.image.attached? %>
    <%end%>
<%end%>
</div>
</div>



<div class="col">
<h2>After Photo</h2>
<!-- Shows the After Photos photos for each Grooming Appt -->
<div>
<%@grooming_appointment.pet_photos.each do |photo|
   if photo.photo_type_id == 3 %>
    <%= image_tag photo.image.variant(resize:"300x300") if photo.image.attached? %>
    <%end%>
<%end%>
</div>
</div>
</div>

<div class="container">
<p>
  <strong>Total:</strong>
  <%= @grooming_appointment.appt_total %>
</p>

<p>
  <strong>Appt Notes:</strong>
  <%= @grooming_appointment.appt_notes %>
</p>

<p>
  <strong>Customer Feedback:</strong>
  <%= @grooming_appointment.customer_feedback %>
</p>

<p>
  <strong>Vac Current:</strong>
  <%= @grooming_appointment.vac_current %>
</p>

<p>
  <strong>Vac Current Date:</strong>
  <%= @grooming_appointment.vac_current_date.to_formatted_s(:long) %>
</p>
</div>

<br>

<h2>Services</h2>
<div class = "row">
<div class = "col-10">
<%= link_to "Add Service", 
new_grooming_service_path({:id => @grooming_appointment.id}), 
:class => "btn btn-success float-right mt-4", style: 'margin-bottom: 10px' %>
</div>
</div>

<table id="example" class="table table-striped table-bordered" style="width: 1000px;">
		<thead>
      <th>Service</th>
      <th>Amount</th>
      <th>Amount Notes</th>
      <th>Edit</th>
		</thead>
		<tbody>
     <% @grooming_appointment.grooming_services.each do |grooming_service| %>
			<tr>
				<td><%= grooming_service.service.service_name %></td>
        <td><%= grooming_service.service_amount%></td>
        <td><%= grooming_service.service_amount_notes %></td>
        <td><%= link_to "Update", edit_grooming_service_path({:id => grooming_service.id}), 
        :class => "btn btn-warning btn-block" %></td>
			</tr>
       <% end %>
		</tbody>
	</table>


<br>
  <h2>Styles</h2>
  <div class = "row">
<div class = "col-10">
<%= link_to "Add Style", 
new_grooming_style_path({:id => @grooming_appointment.id}), 
:class => "btn btn-success float-right mt-4", style: 'margin-bottom: 10px' %>
</div>
</div>
  <table id="example" class="table table-striped table-bordered" style="width: 1000px;">
		<thead>
      <th>Style</th>
      <th>Grooming Style Notes</th>
      <th>Edit</th>
		</thead>

		<tbody>
     <% @grooming_appointment.grooming_styles.each do |grooming_style| %>
			<tr>
				<td><%= grooming_style.style.style_name%></td>
        <td><%= grooming_style.groom_style_notes%></td>
        <td><%= link_to "Update", edit_grooming_style_path({:id => grooming_style.id}), 
        :class => "btn btn-warning btn-block" %></td>
			</tr>
       <% end %>
		</tbody>
	</table>

</div>
