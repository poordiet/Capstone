<%= form_with(model: grooming_appointment, local: true) do |form| %>
  <% if grooming_appointment.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(grooming_appointment.errors.count, "error") %> prohibited this grooming_appointment from being saved:</h2>

      <ul>
        <% grooming_appointment.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>


<div class="content">
<br>

<h1>Edit Grooming Appointment</h1>
 <p><i>* Indicates Required Fields</i></p>
<hr/>
  <div class="field">
    <%= form.label :customer_id, 'Customer: ', class: 'name-label' %>
    <%= form.hidden_field grooming_appointment.pet.customer.id %>
    <%= form.label grooming_appointment.pet.customer.customer_first_name, class: 'name'%>
    <%= form.label grooming_appointment.pet.customer.customer_last_name, class: 'name'%>
  </div>

  <div class="field">
    <%= form.label :pet_id, 'Pet: ', class: 'name-label' %>
    <%= form.hidden_field grooming_appointment.pet.id %>
    <%= form.label grooming_appointment.pet.pet_name, class: 'name'%>
  </div>

  <hr/>


  <div class="form-row">
  <div class=" form-group field col-md-3">
    <%= form.label :store_id, "Store *" %>
    <br>
    <%= form.collection_select :store_id, Store.all, :id, :store_name, class: 'form-control' %>
  </div>
  </div>


  <div class="form-row">
  <div class="form-group field col-md-6">
    <%= form.label :appt_date, 'Appointment Date *' %>
    <br>
     <%= form.text_field :appt_date, type: 'date', class: 'form-control col-md-8' %>
  </div>



  <div class="form-group field col-md-3 ml-2">
    <%= form.label :appt_time, 'Appointment Time *' %>
    <br>
     <%= form.time_select :appt_time, class: 'form-control', :ampm => true %>
  </div>
  </div>

  <div class="form-row">
  <div class="form-group field col-md-6">
    <%= form.label :appt_blades, 'Blades' %>
    <%= form.text_field :appt_blades, class: 'form-control col-md-8' %>
  </div>
  </div>


  <div class="form-row">
  <div class="form-group field col-md-6">
    <%= form.label :vac_current, 'Vaccine Current *' %>
    <br>
    <%= form.select :vac_current, ['Y', 'N'] %>
  </div>
  

  <div class="form-group field col-md-4">
    <%= form.label :vac_current_date, 'Vaccine Current Date *' %>
    <br>
   <%= form.text_field :vac_current_date, type: 'date', class: 'form-control col-md-8' %>
  </div>
  </div>

   <div class="form-row">
  <div class=" form-group field col-md-6">
    <%= form.label :appt_total, 'Total' %>
    <%= form.text_field :appt_total, class: 'form-control col-md-8' %>
  </div>

   <div class="form-group field">
    <%= form.label :payment_type_id, 'Payment Type' %>
    <br>
    <%= form.collection_select :payment_type_id, PaymentType.all, :id, :payment_type, options = {include_blank: true}  %>
  </div>
  </div>

    <hr/>
<!--
 <div class="form-row">
    <div class="form-group col-12">
      <h2>Services</h2>
          <%= form.fields_for :grooming_services do |grooming_service| %>
            <%= render "grooming_service_fields", f: grooming_service %>
          <% end %> 
    </div>
  </div>
  -->

<h2>Services</h2>
<br>
  <div class="form-row">
      <div class="form-group col-md-12">
        <%= link_to_add_association 'Add Service', form, :grooming_services, class: 'btn btn-success btn-sm btn-block float-left mx-auto' %>
        <br>
        <br>
    </div>
  </div>


  <hr/>
<!--
   <div class="form-row">
    <div class="form-group col-12">
      <h2>Styles</h2>
      <%= form.fields_for :grooming_styles do |grooming_style| %>
        <%= render "grooming_style_fields", f: grooming_style %>
      <% end %> 
    </div>
  </div>-->


<h2>Styles</h2>
<br>
 <div class="form-row">
  <div class="form-group col-12">
      <%= link_to_add_association 'Add Style', form, :grooming_styles, class: 'btn btn-success btn-sm btn-block float-left mx-auto' %>
  </div>
</div>

  <div class="form-row">
  <div class="form-group field col-md-12">
   <br> 
    <%= form.label :appt_notes, 'Appointment Notes' %>
    <%= form.text_area :appt_notes, class: 'form-control', rows: '4' %>
  </div>
  </div>

  <div class="form-row">
  <div class="form-group field col-md-12">
    <%= form.label :customer_feedback, 'Customer Feedback' %>
    <%= form.text_area :customer_feedback, class: 'form-control', rows: '4'%>
  </div>
  </div>

<!-- Photos in edit form -->
<!--
 <br>
 <h2>Upload Before Photo</h2>
<div class="form-row">
<div id="pet_photos">
      <%= form.fields_for :pet_photos do |pet_photo| %>
        <%= render "before_pet_photo_fields", f: pet_photo %>
      <% end %> 
  </div>
</div>

<br>
<h2>Upload After Photo</h2>
<div class="form-row">
<%= form.fields_for :pet_photos do |builder| %>
  <%= render "after_pet_photo_fields", :f => builder %>
<% end %>
</div>
-->


 <div class="actions">
    <button type="submit" class="btn btn-primary btn-lg float-right ">Submit</button>
    <%= link_to 'Cancel', session[:prev_url], class: 'btn btn-danger btn-lg float-left'%>
  </div>

<% end %>

</div>
