<br>
<div class="container">
    <div class="row">
        <div class="col-11">

            <p id="notice"><%= notice %></p>

            <h1>
                <%= @employee.emp_first_name %> <%= @employee.emp_last_name %>
            </h1>
            <hr>
             <p>
                <%= link_to 'Update', edit_employee_path(@employee), class:'btn btn-warning btn-lg float-right mr-2' %>
                <%= link_to 'Back', employees_path, class: 'btn btn-danger btn-lg float-right mr-2'%>
            </p>
            <p>
                <strong>Primary Phone:</strong>
                <%= number_to_phone(@employee.emp_primary_phone) %>
            </p>

            <p>
                <strong>Secondary Phone:</strong>
                <%= @employee.emp_secondary_phone %>
            </p>

            <p>
                <strong>Email:</strong>
                <%= @employee.emp_email %>
            </p>

            <p>
                <strong>Hire Date:</strong>
                <%if @employee.emp_hire_date.nil?%>
                <%= @employee.emp_hire_date%>
                <%else%>
                <%= @employee.emp_hire_date.to_formatted_s(:long) %>
                <%end%> 
            </p>

            <p>
                <strong>Address:</strong>
                <%= @employee.emp_address %>
            </p>

            <p>
                <strong>City:</strong>
                <%= @employee.emp_city %>
            </p>

            <p>
                <strong>State:</strong>
                <%= @employee.state.state_abbreviation %>
            </p>

            <p>
                <strong>Zip Code:</strong>
                <%= @employee.emp_zip %>
            </p>
            <br>
            <h2>Stores</h2>
            <br>
            <div class="container">
                <%= link_to "Add Store", 
                new_employee_store_path({:store_id => @employee.id, 
                :emp_first_name => @employee.emp_first_name,
                :emp_last_name => @employee.emp_last_name}), 
                :class => "btn btn-success float-right mt-4", style: 'margin-bottom: 10px' %>
                <table id="store" class="table table-striped table-bordered" style="width: 1000px;">
                    <thead class="thead-dark">
                        <tr>
                            <th>Store Name</th>
                            <th>Store Address</th>
                            <th>Store City</th>
                            <th>Store State</th>
                            <th>Store Zip</th>
                            <th>Store Phone</th>
                            <th>Edit</th>
                            <th>Delete</th>
                        </tr>
                    </thead>

                    <tbody>
                        <% @employee.employee_stores.each do |employee_store| %>
                        <tr>
                            <td><%= employee_store.store.store_name %></td>
                            <td><%= employee_store.store.store_address %></td>
                            <td><%= employee_store.store.store_city %></td>
                            <td><%= employee_store.store.state.state_abbreviation %></td>
                            <td><%= employee_store.store.store_zip %></td>
                            <td><%= number_to_phone(employee_store.store.store_phone) %></td>
                            <td><%= link_to "Update", edit_employee_store_path(employee_store), 
                            :class => "btn btn-warning btn-block" %></td>
                            <td><%= link_to 'Delete', employee_store, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-block btn-danger' %></td>
                        </tr>
                        <% end %>
                    </tbody>
                </table>
            </div>
            <br>
            <h2>Grooming Services</h2>
            <br>
            <div class="container">
                <table id="grooming_services" class="table table-striped table-bordered" style="width: 1000px;">
                    <thead class="thead-dark">
                        <tr>
                            <th>Service</th>
                            <th>Grooming Appointment</th>
                            <th>Service Amount</th>
                            <th>Service Amount Notes</th>
                        </tr>
                    </thead>

                    <tbody>
                        <% @employee.grooming_services.each do |grooming_service| %>
                        <tr>
                            <td><%= grooming_service.service.service_name %></td>
                            <td><%= grooming_service.grooming_appointment.appt_date %></td>
                            <td><%= grooming_service.service_amount %></td>
                            <td><%= grooming_service.service_amount_notes %></td>
                        </tr>
                        <% end %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<br>
<script type="text/javascript">
    var dataTable = $('#store').DataTable();

    $(document).ready(function() {
        dataTable;
    });

    document.addEventListener("turbolinks:before-cache", function() {
        if (dataTable !== null) {
            dataTable.destroy();
            dataTable = null;
        }
    });
</script>
<br>

<br>
<script type="text/javascript">
    var dataTable = $('#grooming_services').DataTable();

    $(document).ready(function() {
        dataTable;
    });

    document.addEventListener("turbolinks:before-cache", function() {
        if (dataTable !== null) {
            dataTable.destroy();
            dataTable = null;
        }
    });
</script>
<br>