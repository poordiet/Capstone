<p id="notice"><%= notice %></p>

<div class="container">
    <br>
    <h1>Users</h1>
    <hr>
    <a class="btn btn-success float-right mt-4" href="users/new" role="button" aria-pressed="true">New User</a>
    <!--<%= link_to 'New User', new_user_session_path, class: 'btn btn-success float-right mt-4' %>-->
    <table id="example" class="table table-hover table-bordered">
    <thead class="thead-dark">
      <tr>
        <th>Employee</th>
        <th>Employee Status</th>
        <th>Email</th>
        <th>Admin</th>
        <th>Show</th>
        <th>Edit</th>
        <th>Delete</th>
      </tr>
    </thead>

    <tbody>
      <% @users.each do |user| %>
        <tr>
          <td><%= user.employee.emp_first_name %> <%= user.employee.emp_last_name %></td>
          <td><%= user.employee.employee_status.status %></td>
          <td><%= user.email %></td>
          <td><%= user.admin %></td>
          <td><%= link_to 'Show', user, class: 'btn btn-primary btn-block' %></td>
          <td><%= link_to 'Edit', edit_user_path(user), class: 'btn btn-warning btn-block' %></td>
          <td><%= link_to 'Delete', user, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-block btn-danger' %></td>
          <!--<td><%= link_to 'Delete', user, method: :delete, data: { confirm: 'Are you sure?' } %></td>-->
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
<br>

<script type="text/javascript">
    var dataTable = $('#example').DataTable();

    $(document).ready(function() {
        dataTable;
    });

    document.addEventListener("turbolinks:before-cache", function() {
        if (dataTable !== null) {
            dataTable.destroy();
            dataTable = null;
        }
    });
</script>