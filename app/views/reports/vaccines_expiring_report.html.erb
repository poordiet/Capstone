<div class="container">

<br>
<hr> 
<br>


    <h2>Vaccines Expiring in the Next Three Months</h2>
<table id="example" class="table table-striped table-bordered" style="width: 1000px;">
	<thead class="thead-dark">
      <th>Customer</th>
      <th>Customer Phone</th>
      <th>Pet</th>
      <th>Vaccine</th>
      <th>Date Expired</th>
		</thead>
		<tbody>
     <% @pet_vaccinations.each do |pet_vaccinations| %>
		<tr>
        <% if pet_vaccinations.date_expire.present? && pet_vaccinations.date_expire >= Date.today && pet_vaccinations.date_expire <= Date.today + 3.months%>
         <td><%= pet_vaccinations.pet.customer.customer_first_name %>
            <%= pet_vaccinations.pet.customer.customer_last_name %></td>
        <td><%= pet_vaccinations.pet.customer.customer_primary_phone %></td>
        <td><%= pet_vaccinations.pet.pet_name %></td>
		<td><%= pet_vaccinations.vaccine.vaccine_name %></td>
        <td><%= pet_vaccinations.date_expire.to_formatted_s(:long) %></td>
		</tr>
           <% end %> 
       <% end %>
		</tbody>
	</table>

    <br>
<hr>
<br>
</div>

<script type="text/javascript">
  var dataTable = $('#example').DataTable();

  $(document).ready(function() {
   dataTable;
  });
  
  document.addEventListener("turbolinks:before-cache", function() {
    if (dataTable !== null) {
    dataTable.destroy();  
    dataTable = null;
    }
  });

</script>